exports.id=5017,exports.ids=[5017],exports.modules={2250:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(60687),r=t(43210),i=t(16189),l=t(85814),n=t.n(l),d=t(24934),o=t(59821),c=t(62688);let u=(0,c.A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var m=t(19080),h=t(28561),x=t(53411),p=t(84027),f=t(99891);let g=(0,c.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var b=t(12941),y=t(52581);function j({children:e}){let[s,t]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(null),k=(0,i.useRouter)(),A=(0,i.usePathname)(),P=async()=>{try{await fetch("/api/admin/auth/logout",{method:"POST",credentials:"include"}),t(!1),w(null),y.oR.success("Logged out successfully"),k.push("/admin/login")}catch(e){console.error("Logout failed:",e),y.oR.error("Logout failed")}};if(l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 via-orange-50 to-red-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-red-600 mb-4"}),(0,a.jsx)("p",{className:"text-red-900 font-semibold",children:"Loading..."})]})});if("/admin/login"===A||!s)return e;let C=[{name:"Dashboard",href:"/admin",icon:u},{name:"Products",href:"/admin/products",icon:m.A},{name:"Orders",href:"/admin/orders",icon:h.A},{name:"Analytics",href:"/admin/analytics",icon:x.A},{name:"Settings",href:"/admin/settings",icon:p.A}],R=({mobile:e=!1})=>(0,a.jsxs)("div",{className:`${e?"w-full":"w-64"} bg-gradient-to-b from-red-900 via-red-800 to-amber-800 text-white h-full flex flex-col`,children:[(0,a.jsx)("div",{className:"p-6 border-b border-red-700",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-red-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"text-white h-6 w-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-amber-100",children:"Admin Panel"}),(0,a.jsx)("p",{className:"text-sm text-amber-200",children:"Punjab Heritage"})]})]})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-2",children:C.map(s=>{let t=A===s.href;return(0,a.jsxs)(n(),{href:s.href,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${t?"bg-red-700 text-white":"text-amber-100 hover:bg-red-700/50 hover:text-white"}`,onClick:()=>e&&v(!1),children:[(0,a.jsx)(s.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:s.name})]},s.name)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-red-700 space-y-3",children:[N&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm text-amber-200",children:"Welcome back"}),(0,a.jsx)("p",{className:"text-sm font-semibold text-amber-100",children:N.email}),(0,a.jsx)(o.E,{className:"mt-1 bg-amber-600 text-white text-xs",children:N.role})]}),(0,a.jsxs)(d.$,{onClick:P,variant:"ghost",className:"w-full justify-start text-amber-100 hover:bg-red-700/50 hover:text-white",children:[(0,a.jsx)(g,{className:"h-5 w-5 mr-3"}),"Logout"]})]})]});return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsx)("div",{className:"hidden lg:block fixed inset-y-0 left-0 z-50",children:(0,a.jsx)(R,{})}),j&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>v(!1)}),(0,a.jsx)("div",{className:"absolute left-0 top-0 h-full w-64",children:(0,a.jsx)(R,{mobile:!0})})]}),(0,a.jsxs)("div",{className:"flex-1 lg:ml-64",children:[(0,a.jsx)("div",{className:"lg:hidden bg-white shadow-sm border-b px-6 py-4",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>v(!0),children:(0,a.jsx)(b.A,{className:"h-6 w-6"})}),(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Dashboard"})]})})}),(0,a.jsx)("main",{className:"w-full",children:e})]})]})}},3018:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>d,TN:()=>o});var a=t(60687),r=t(43210),i=t(24224),l=t(96241);let n=(0,i.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=r.forwardRef(({className:e,variant:s,...t},r)=>(0,a.jsx)("div",{ref:r,role:"alert",className:(0,l.cn)(n({variant:s}),e),...t}));d.displayName="Alert",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...s}));o.displayName="AlertDescription"},5336:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8819:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},12941:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},13949:(e,s,t)=>{Promise.resolve().then(t.bind(t,2250))},15616:(e,s,t)=>{"use strict";t.d(s,{T:()=>l});var a=t(60687),r=t(43210),i=t(96241);let l=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...s}));l.displayName="Textarea"},16189:(e,s,t)=>{"use strict";var a=t(65773);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},19080:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},27617:(e,s,t)=>{"use strict";t.d(s,{A:()=>Z});var a=t(60687),r=t(43210),i=t(16189),l=t(24934),n=t(68988),d=t(39390),o=t(63974),c=t(15616),u=t(28559),m=t(8819),h=t(52581),x=t(55192),p=t(62688);let f=(0,p.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),g=(0,p.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var b=t(11860);function y({images:e,onImagesChange:s,maxImages:t=5}){let[i,o]=(0,r.useState)(!1),c=(0,r.useRef)(null),u=async a=>{let r=a.target.files;if(!r)return;if(e.length+r.length>t){h.oR.error(`Maximum ${t} images allowed`);return}o(!0);let i=[];try{for(let e of Array.from(r)){if(!e.type.startsWith("image/")){h.oR.error("Please select only image files");continue}if(e.size>5242880){h.oR.error("Image size should be less than 5MB");continue}let s=new FormData;s.append("files",e);try{let t=await fetch("/api/admin/upload",{method:"POST",credentials:"include",body:s});if(t.ok){let s=await t.json();s.success&&s.files.length>0?i.push(s.files[0]):(console.error("Upload failed:",s),h.oR.error(s.error||`Failed to upload ${e.name}`))}else{let s=await t.text();if(console.error("Upload response error:",t.status,s),401===t.status)h.oR.error("Authentication required. Please login to admin panel.");else try{let t=JSON.parse(s);h.oR.error(t.error||`Failed to upload ${e.name}`)}catch{h.oR.error(`Failed to upload ${e.name} (Status: ${t.status})`)}}}catch(s){console.error("Upload error:",s),h.oR.error(`Network error uploading ${e.name}`)}}i.length>0&&(s([...e,...i]),h.oR.success(`${i.length} image(s) uploaded successfully`))}catch(e){console.error("Error uploading images:",e),h.oR.error("Failed to upload images")}finally{o(!1),c.current&&(c.current.value="")}},m=t=>{s(e.filter((e,s)=>s!==t))};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(d.J,{children:["Product Images (Max ",t,")"]}),(0,a.jsx)("div",{className:`border-2 border-dashed border-gray-300 rounded-lg p-6 text-center transition-colors ${i?"border-blue-500 bg-blue-50":"hover:border-gray-400"}`,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation();let s=e.dataTransfer.files;if(s.length>0){let e=c.current;e&&(e.files=s,u({target:e}))}},children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f,{className:"h-12 w-12 text-gray-400 mx-auto"}),(0,a.jsx)("div",{children:(0,a.jsxs)(l.$,{type:"button",variant:"outline",onClick:()=>c.current?.click(),disabled:i||e.length>=t,className:"mb-2",children:[(0,a.jsx)(g,{className:"h-4 w-4 mr-2"}),i?"Uploading...":"Choose Images"]})}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Or drag and drop images here"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"PNG, JPG, WebP up to 5MB each"})]})}),(0,a.jsx)(n.p,{ref:c,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:u}),e.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d.J,{children:["Uploaded Images (",e.length,"/",t,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:e.map((e,s)=>(0,a.jsxs)(x.Zp,{className:"relative overflow-hidden",children:[(0,a.jsx)("div",{className:"aspect-square",children:(0,a.jsx)("img",{src:e,alt:`Product image ${s+1}`,className:"w-full h-full object-cover"})}),(0,a.jsx)(l.$,{type:"button",size:"sm",variant:"destructive",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>m(s),children:(0,a.jsx)(b.A,{className:"h-3 w-3"})}),0===s&&(0,a.jsx)("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white px-1 py-0.5 rounded text-xs",children:"Main"})]},s))}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"The first image will be used as the main product image"})]})]})}var j=t(98599),v=t(11273),N=t(70569),w=t(65551),k=t(83721),A=t(18853),P=t(46059),C=t(14163),R="Checkbox",[S,z]=(0,v.A)(R),[F,D]=S(R),M=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:i,checked:l,defaultChecked:n,required:d,disabled:o,value:c="on",onCheckedChange:u,form:m,...h}=e,[x,p]=r.useState(null),f=(0,j.s)(s,e=>p(e)),g=r.useRef(!1),b=!x||m||!!x.closest("form"),[y=!1,v]=(0,w.i)({prop:l,defaultProp:n,onChange:u}),k=r.useRef(y);return r.useEffect(()=>{let e=x?.form;if(e){let s=()=>v(k.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[x,v]),(0,a.jsxs)(F,{scope:t,state:y,disabled:o,children:[(0,a.jsx)(C.sG.button,{type:"button",role:"checkbox","aria-checked":U(y)?"mixed":y,"aria-required":d,"data-state":q(y),"data-disabled":o?"":void 0,disabled:o,value:c,...h,ref:f,onKeyDown:(0,N.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,N.m)(e.onClick,e=>{v(e=>!!U(e)||!e),b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),b&&(0,a.jsx)(J,{control:x,bubbles:!g.current,name:i,value:c,checked:y,required:d,disabled:o,form:m,style:{transform:"translateX(-100%)"},defaultChecked:!U(n)&&n})]})});M.displayName=R;var T="CheckboxIndicator",$=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:r,...i}=e,l=D(T,t);return(0,a.jsx)(P.C,{present:r||U(l.state)||!0===l.state,children:(0,a.jsx)(C.sG.span,{"data-state":q(l.state),"data-disabled":l.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...e.style}})})});$.displayName=T;var J=e=>{let{control:s,checked:t,bubbles:i=!0,defaultChecked:l,...n}=e,d=r.useRef(null),o=(0,k.Z)(t),c=(0,A.X)(s);r.useEffect(()=>{let e=d.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==t&&s){let a=new Event("click",{bubbles:i});e.indeterminate=U(t),s.call(e,!U(t)&&t),e.dispatchEvent(a)}},[o,t,i]);let u=r.useRef(!U(t)&&t);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??u.current,...n,tabIndex:-1,ref:d,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function U(e){return"indeterminate"===e}function q(e){return U(e)?"indeterminate":e?"checked":"unchecked"}var L=t(13964),V=t(96241);let E=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(M,{ref:t,className:(0,V.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,a.jsx)($,{className:(0,V.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})}));E.displayName=M.displayName;let I=["UK 1","UK 2","UK 3","UK 4","UK 5","UK 6","UK 7","UK 8","UK 9","UK 10"];function K({selectedSizes:e,onSizesChange:s,label:t="Available Sizes",required:r=!1}){let i=t=>{e.includes(t)?s(e.filter(e=>e!==t)):s([...e,t])};return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(d.J,{className:"text-base",children:[t," ",r&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{e.length===I.length?s([]):s([...I])},className:"text-sm text-blue-600 hover:text-blue-800 underline",children:e.length===I.length?"Deselect All":"Select All"})]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-3",children:I.map(s=>{let t=e.includes(s);return(0,a.jsxs)("div",{className:`flex items-center space-x-2 p-3 border-2 rounded-lg cursor-pointer transition-colors ${t?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 bg-white"}`,onClick:()=>i(s),children:[(0,a.jsx)(E,{id:`size-${s}`,checked:t,onChange:()=>i(s),className:"pointer-events-none"}),(0,a.jsx)(d.J,{htmlFor:`size-${s}`,className:"text-sm font-medium cursor-pointer pointer-events-none",children:s})]},s)})}),e.length>0&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Selected sizes: ",e.join(", ")]})}),r&&0===e.length&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:"Please select at least one size"})]})}var O=t(3018),H=t(78122),W=t(35071),B=t(5336);function G({onAuthChange:e}){let[s,t]=(0,r.useState)("checking"),[i,n]=(0,r.useState)(null),d=async()=>{t("checking");try{let s=await fetch("/api/admin/auth/verify",{credentials:"include"});if(s.ok){let a=await s.json();a.success?(t("authenticated"),n(a.admin),e?.(!0)):(t("not-authenticated"),n(null),e?.(!1))}else t("not-authenticated"),n(null),e?.(!1)}catch(s){console.error("Auth check failed:",s),t("not-authenticated"),n(null),e?.(!1)}};return"checking"===s?(0,a.jsxs)(O.Fc,{className:"mb-4",children:[(0,a.jsx)(H.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(O.TN,{children:"Checking authentication status..."})]}):"not-authenticated"===s?(0,a.jsxs)(O.Fc,{className:"mb-4 border-red-200 bg-red-50",children:[(0,a.jsx)(W.A,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)(O.TN,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-red-800",children:"Not authenticated. Please login to access admin features."}),(0,a.jsx)(l.$,{onClick:()=>{window.location.href="/admin/login"},size:"sm",className:"ml-4",children:"Login"})]})})]}):(0,a.jsxs)(O.Fc,{className:"mb-4 border-green-200 bg-green-50",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(O.TN,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-green-800",children:["Authenticated as: ",i?.email," (",i?.role,")"]}),(0,a.jsxs)(l.$,{onClick:d,size:"sm",variant:"outline",className:"ml-4",children:[(0,a.jsx)(H.A,{className:"h-3 w-3 mr-1"}),"Refresh"]})]})})]})}let X={name:"",punjabiName:"",description:"",punjabiDescription:"",price:0,originalPrice:0,category:"men",productType:"jutti",stock:0,isActive:!0,images:[],sizes:[]};function Z({initialData:e,onSave:s,onCancel:t,isDialog:x=!1}){let p=(0,i.useRouter)(),[f,g]=(0,r.useState)(e||X),[b,j]=(0,r.useState)(!1),v=e=>{let{name:s,value:t,type:a}=e.target;g(r=>({...r,[s]:"checkbox"===a?e.target.checked:"number"===a?parseFloat(t)||0:t}))},N=(e,s)=>{g(t=>({...t,[e]:s}))},w=async()=>{if(!f.name||!f.price||!f.category){h.oR.error("Please fill in required fields: name, price, and category are required");return}if(!f.sizes||0===f.sizes.length){h.oR.error("Please select at least one size");return}console.log("Saving product with data:",f),j(!0);try{let t="/api/admin/products",a=e?.id?"PUT":"POST",r=e?.id?{...f,_id:e.id}:f;console.log("Sending request:",{method:a,url:t,payload:r});let i=await fetch(t,{method:a,headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(r)});if(console.log("Response status:",i.status),i.ok){let t=await i.json();console.log("Response data:",t),t.success?(h.oR.success(e?.id?"Product updated successfully":"Product created successfully"),s?s(f):x||p.push("/admin/products")):(console.error("Save failed:",t),h.oR.error(t.error||"Failed to save product"))}else{let e=await i.text();if(console.error("HTTP Error:",i.status,e),401===i.status)h.oR.error("Authentication required. Please login to admin panel.");else try{let s=JSON.parse(e);h.oR.error(s.error||`Failed to save product (Status: ${i.status})`)}catch{h.oR.error(`Failed to save product (Status: ${i.status})`)}}}catch(e){console.error("Network error saving product:",e),h.oR.error("Network error: Failed to save product")}finally{j(!1)}},k=()=>{t?t():x||p.push("/admin/products")};return(0,a.jsxs)("div",{className:"space-y-6",children:[!x&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(l.$,{variant:"outline",onClick:k,className:"flex items-center space-x-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Back to Products"})]}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-900",children:e?.id?"Edit Product":"Add New Product"})]})}),(0,a.jsx)(G,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"name",children:"Product Name *"}),(0,a.jsx)(n.p,{id:"name",name:"name",value:f.name,onChange:v,placeholder:"Traditional Punjabi Jutti",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"punjabiName",children:"Punjabi Name"}),(0,a.jsx)(n.p,{id:"punjabiName",name:"punjabiName",value:f.punjabiName,onChange:v,placeholder:"ਪੰਜਾਬੀ ਜੁੱਤੀ"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"description",children:"Description *"}),(0,a.jsx)(c.T,{id:"description",name:"description",value:f.description,onChange:v,placeholder:"Detailed product description...",rows:3,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"punjabiDescription",children:"Punjabi Description"}),(0,a.jsx)(c.T,{id:"punjabiDescription",name:"punjabiDescription",value:f.punjabiDescription,onChange:v,placeholder:"ਪੰਜਾਬੀ ਵਿੱਚ ਵਰਣਨ...",rows:2})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Product Classification"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"productType",children:"Product Type *"}),(0,a.jsxs)(o.l6,{value:f.productType,onValueChange:e=>N("productType",e),children:[(0,a.jsx)(o.bq,{children:(0,a.jsx)(o.yv,{placeholder:"Select product type"})}),(0,a.jsxs)(o.gC,{children:[(0,a.jsx)(o.eb,{value:"jutti",children:"Jutti"}),(0,a.jsx)(o.eb,{value:"fulkari",children:"Fulkari"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"category",children:"For Whom *"}),(0,a.jsxs)(o.l6,{value:f.category,onValueChange:e=>N("category",e),children:[(0,a.jsx)(o.bq,{children:(0,a.jsx)(o.yv,{placeholder:"Select target audience"})}),(0,a.jsxs)(o.gC,{children:[(0,a.jsx)(o.eb,{value:"men",children:"Men"}),(0,a.jsx)(o.eb,{value:"women",children:"Women"}),(0,a.jsx)(o.eb,{value:"kids",children:"Kids"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Pricing & Stock"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"price",children:"Selling Price (₹) *"}),(0,a.jsx)(n.p,{id:"price",name:"price",type:"number",value:f.price,onChange:v,placeholder:"1500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"originalPrice",children:"Original Price (₹)"}),(0,a.jsx)(n.p,{id:"originalPrice",name:"originalPrice",type:"number",value:f.originalPrice,onChange:v,placeholder:"2000"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty if no discount"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"stock",children:"Stock Quantity *"}),(0,a.jsx)(n.p,{id:"stock",name:"stock",type:"number",value:f.stock,onChange:v,placeholder:"25",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Product Images"}),(0,a.jsx)(y,{images:f.images,onImagesChange:e=>g(s=>({...s,images:e})),maxImages:5})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Product Variants"}),(0,a.jsx)(K,{selectedSizes:f.sizes,onSizesChange:e=>{g(s=>({...s,sizes:e}))},required:!0})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Status"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:f.isActive,onChange:v,className:"rounded"}),(0,a.jsx)(d.J,{htmlFor:"isActive",children:"Product is active and visible to customers"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:k,disabled:b,children:"Cancel"}),(0,a.jsx)(l.$,{onClick:w,disabled:b,className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),e?.id?"Update":"Create"," Product"]})})]})]})}},28559:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},28561:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},35071:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},39390:(e,s,t)=>{"use strict";t.d(s,{J:()=>o});var a=t(60687),r=t(43210),i=t(78148),l=t(24224),n=t(96241);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.b,{ref:t,className:(0,n.cn)(d(),e),...s}));o.displayName=i.b.displayName},53411:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},59821:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var a=t(60687);t(43210);var r=t(24224),i=t(96241);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return(0,a.jsx)("div",{className:(0,i.cn)(l({variant:s}),e),...t})}},63974:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>f,gC:()=>p,l6:()=>c,yv:()=>u});var a=t(60687),r=t(43210),i=t(42133),l=t(78272),n=t(3589),d=t(13964),o=t(96241);let c=i.bL;i.YJ;let u=i.WT,m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.l9,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=i.l9.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})}));h.displayName=i.PP.displayName;let x=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})}));x.displayName=i.wn.displayName;let p=r.forwardRef(({className:e,children:s,position:t="popper",...r},l)=>(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:l,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,a.jsx)(h,{}),(0,a.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(x,{})]})}));p.displayName=i.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=i.JU.displayName;let f=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(i.q7,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})}),(0,a.jsx)(i.p4,{children:s})]}));f.displayName=i.q7.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=i.wv.displayName},68988:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(60687),r=t(43210),i=t(96241);let l=r.forwardRef(({className:e,type:s,...t},r)=>(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));l.displayName="Input"},78148:(e,s,t)=>{"use strict";t.d(s,{b:()=>n});var a=t(43210),r=t(14163),i=t(60687),l=a.forwardRef((e,s)=>(0,i.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var n=l},84027:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95389:(e,s,t)=>{Promise.resolve().then(t.bind(t,97786))},97786:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/harsh/Downloads/punjabi-ecom-storeV4/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/harsh/Downloads/punjabi-ecom-storeV4/app/admin/layout.tsx","default")},99891:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])}};